replicaCount: 1

port: 7077

normal_deploy:
  enabled: true

canary:
  enabled: false

version: api-v1
istio_url: gateway-staging.cypherscan.ai
image:
  repository: ghcr.io/zama-ai/kms-blockchain-gateway-dev
  pullPolicy: Always
  tag: v0.7.1
  command: [] #ENTRYPOINT
  args: ["gateway"] #CMD
  containerPort: 7077
  livenessProbe:
    path: /
    port: 7077
    periodSeconds: 300
    successThreshold: 1
    failureThreshold: 3
    timeoutSeconds: 1
  readinessProbe:
    path: /
    port: 7077
    periodSeconds: 30
    successThreshold: 1
    failureThreshold: 3
    timeoutSeconds: 1

strategy:
  rollingUpdate:
    maxSurge: 1
    maxUnavailable: 0

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: false
  annotations: {}
  name: ""

podAnnotations:
  product: api

podSecurityContext: {}

securityContext: {}

service:
  type: ClusterIP
  port: 7077

resources:
  requests:
    cpu: 250m
    memory: 512Mi

autoscaling:
  enabled: true
  minReplicas: 1
  maxReplicas: 1
  targetCPUUtilizationPercentage: 80
  targetMemoryUtilizationPercentage: 80

nodeSelector: {}

tolerations: []

affinity: {}

configFile:
  enabled: true
  name: gateway-config
  filePath: /app/gateway/config/default.toml
  fileName: default.toml # Adicione o nome do arquivo aqui
  data: |
    tick_interval_secs = 1
    storage_path = "./temp/events.toml"

    [oracle]
    addresses = ["https://staging-node-rpc.cypherscan.ai/"]

    [blockchain]
    addresses = ["http://kms-validator.kms-stage.svc.cluster.local:9090"]
    contract = "wasm14hj2tavq8fpesdwxxcu44rty3hh90vhujrvcmstl4zr3txmfvw9s0phg4d"

    [blockchain.signkey]
    mnemonic = "bachelor similar spirit copper rely carbon web hobby conduct wrap conduct wire shine parrot erosion divert crucial balance lock reason price ignore educate open"
    bip32 = "xprv9s21ZrQH143K3FQVQn1Z6"

    [blockchain.fee]
    denom = "ucosm"
    amount = 3000000

    [core]
    addresses = ["http://kms-core.kms-stage.svc.cluster.local:50051"]

    [core.timeout_config]
    channel_timeout = 60

    [core.timeout_config.crs]
    initial_wait_time = 60
    retry_interval = 60
    max_poll_count = 120

    [core.timeout_config.keygen]
    initial_wait_time = 18000
    retry_interval = 15000
    max_poll_count = 1150

    [core.timeout_config.preproc]
    initial_wait_time = 18000
    retry_interval = 15000
    max_poll_count = 1150

    [core.timeout_config.decryption]
    initial_wait_time = 1
    retry_interval = 1
    max_poll_count = 24

    [core.timeout_config.reencryption]
    initial_wait_time = 1
    retry_interval = 1
    max_poll_count = 24

    [tracing]
    service_name = "kms-asc-connector"
    endpoint = "http://localhost:4317"

    [store]
    url = "http://gateway-store.kms-stage.svc.cluster.local:8088"
